{"ast":null,"code":"var _jsxFileName = \"/Users/nicklankau/life-tracker/frontend/src/components/AdaptiveCalendar.js\";\nimport React, { useEffect, useState } from 'react';\nimport './AdaptiveCalendar.css';\nimport { getTasksByDate, updateTaskTime } from '../apiService'; // Import the updateTaskTime function\nimport { useCalendar } from './CalendarContext'; // Import the useCalendar hook\n\nconst AdaptiveCalendar = () => {\n  const {\n    selectedDate\n  } = useCalendar(); // Get the selectedDate from CalendarContext\n  const [tasks, setTasks] = useState([]);\n  const [draggedTask, setDraggedTask] = useState(null); // State to keep track of the dragged task\n\n  useEffect(() => {\n    const fetchTasks = async () => {\n      try {\n        const fetchedTasks = await getTasksByDate(selectedDate); // Use selectedDate from CalendarContext\n        setTasks(fetchedTasks);\n      } catch (error) {\n        console.error('Error fetching tasks:', error);\n      }\n    };\n    fetchTasks();\n  }, [selectedDate]); // Re-fetch tasks when selectedDate changes\n\n  const handleDragStart = task => {\n    setDraggedTask(task); // Set the dragged task\n  };\n  const handleDrop = async timeSlot => {\n    if (draggedTask) {\n      try {\n        // Update the task with the new time slot\n        await updateTaskTime(draggedTask.id, {\n          time: timeSlot\n        });\n        // Refresh the tasks\n        const updatedTasks = await getTasksByDate(selectedDate);\n        setTasks(updatedTasks);\n        setDraggedTask(null); // Clear the dragged task\n      } catch (error) {\n        console.error('Error updating task time:', error);\n      }\n    }\n  };\n  const handleDragOver = event => {\n    event.preventDefault(); // Allow drop\n  };\n\n  // Generating time slots from 7 AM to 11 PM\n  const timeSlots = Array.from({\n    length: 17\n  }, (_, i) => {\n    const hour = 7 + i;\n    return hour > 12 ? `${hour - 12} PM` : `${hour} AM`;\n  });\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"adaptive-calendar-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"table\", {\n    className: \"adaptive-calendar-table\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 25\n    }\n  }, \"Time\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 25\n    }\n  }, \"Tasks\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 17\n    }\n  }, timeSlots.map((slot, index) => /*#__PURE__*/React.createElement(\"tr\", {\n    key: index,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    className: \"time-slot\",\n    onDrop: () => handleDrop(slot),\n    onDragOver: handleDragOver,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 29\n    }\n  }, slot), index === 0 && /*#__PURE__*/React.createElement(\"td\", {\n    className: \"task-slot\",\n    rowSpan: timeSlots.length,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 33\n    }\n  }, tasks.map(task => /*#__PURE__*/React.createElement(\"div\", {\n    key: task.id,\n    className: \"task-item\",\n    draggable: true,\n    onDragStart: () => handleDragStart(task),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 41\n    }\n  }, task.name))))))));\n};\nexport default AdaptiveCalendar;","map":{"version":3,"names":["React","useEffect","useState","getTasksByDate","updateTaskTime","useCalendar","AdaptiveCalendar","selectedDate","tasks","setTasks","draggedTask","setDraggedTask","fetchTasks","fetchedTasks","error","console","handleDragStart","task","handleDrop","timeSlot","id","time","updatedTasks","handleDragOver","event","preventDefault","timeSlots","Array","from","length","_","i","hour","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","map","slot","index","key","onDrop","onDragOver","rowSpan","draggable","onDragStart","name"],"sources":["/Users/nicklankau/life-tracker/frontend/src/components/AdaptiveCalendar.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport './AdaptiveCalendar.css';\nimport { getTasksByDate, updateTaskTime } from '../apiService'; // Import the updateTaskTime function\nimport { useCalendar } from './CalendarContext'; // Import the useCalendar hook\n\nconst AdaptiveCalendar = () => {\n    const { selectedDate } = useCalendar(); // Get the selectedDate from CalendarContext\n    const [tasks, setTasks] = useState([]);\n    const [draggedTask, setDraggedTask] = useState(null); // State to keep track of the dragged task\n\n    useEffect(() => {\n        const fetchTasks = async () => {\n            try {\n                const fetchedTasks = await getTasksByDate(selectedDate); // Use selectedDate from CalendarContext\n                setTasks(fetchedTasks);\n            } catch (error) {\n                console.error('Error fetching tasks:', error);\n            }\n        };\n\n        fetchTasks();\n    }, [selectedDate]); // Re-fetch tasks when selectedDate changes\n\n    const handleDragStart = (task) => {\n        setDraggedTask(task); // Set the dragged task\n    };\n\n    const handleDrop = async (timeSlot) => {\n        if (draggedTask) {\n            try {\n                // Update the task with the new time slot\n                await updateTaskTime(draggedTask.id, { time: timeSlot });\n                // Refresh the tasks\n                const updatedTasks = await getTasksByDate(selectedDate);\n                setTasks(updatedTasks);\n                setDraggedTask(null); // Clear the dragged task\n            } catch (error) {\n                console.error('Error updating task time:', error);\n            }\n        }\n    };\n\n    const handleDragOver = (event) => {\n        event.preventDefault(); // Allow drop\n    };\n\n    // Generating time slots from 7 AM to 11 PM\n    const timeSlots = Array.from({ length: 17 }, (_, i) => {\n        const hour = 7 + i;\n        return hour > 12 ? `${hour - 12} PM` : `${hour} AM`;\n    });\n\n    return (\n        <div className=\"adaptive-calendar-container\">\n            <table className=\"adaptive-calendar-table\">\n                <thead>\n                    <tr>\n                        <th>Time</th>\n                        <th>Tasks</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    {timeSlots.map((slot, index) => (\n                        <tr key={index}>\n                            <td\n                                className=\"time-slot\"\n                                onDrop={() => handleDrop(slot)}\n                                onDragOver={handleDragOver}\n                            >\n                                {slot}\n                            </td>\n                            {index === 0 && (\n                                <td\n                                    className=\"task-slot\"\n                                    rowSpan={timeSlots.length}\n                                >\n                                    {tasks.map((task) => (\n                                        <div\n                                            key={task.id}\n                                            className=\"task-item\"\n                                            draggable\n                                            onDragStart={() => handleDragStart(task)}\n                                        >\n                                            {task.name}\n                                        </div>\n                                    ))}\n                                </td>\n                            )}\n                        </tr>\n                    ))}\n                </tbody>\n            </table>\n        </div>\n    );\n};\n\nexport default AdaptiveCalendar;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}